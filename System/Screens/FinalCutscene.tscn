[gd_scene load_steps=19 format=3 uid="uid://534i1o72wt04"]

[ext_resource type="Script" path="res://System/Screens/final_cutscene.gd" id="1_2le0v"]
[ext_resource type="PackedScene" uid="uid://dudn4ykjy3wju" path="res://Assets/Models/Environment/Stone Arch/scene.gltf" id="1_htwbj"]
[ext_resource type="PackedScene" uid="uid://dmkdi3tju53pv" path="res://Assets/Models/Environment/Dungeon floor and assets/FloorMarble.fbx" id="2_qaiwt"]
[ext_resource type="PackedScene" uid="uid://djx50pj07yprd" path="res://Assets/Models/Characters/Torro/SK_Torro.fbx" id="3_peldu"]
[ext_resource type="Material" uid="uid://bliy7hrlk4fc2" path="res://Assets/Models/Characters/Torro/M_Torro.tres" id="4_qx0je"]
[ext_resource type="AnimationLibrary" uid="uid://b8snyyl6xqcue" path="res://Assets/Models/Characters/Torro/Animations/A_Male_FinalEndScene.fbx" id="5_3cul0"]
[ext_resource type="PackedScene" uid="uid://1vlktamrmvom" path="res://Assets/Models/Characters/Pluma/SK_Pluma.fbx" id="5_jakol"]
[ext_resource type="Material" uid="uid://w7c2p1jq0i1t" path="res://Assets/Models/Characters/Pluma/M_Pluma.tres" id="6_rtsqc"]
[ext_resource type="AnimationLibrary" uid="uid://cr06dywfgce2x" path="res://Assets/Models/Characters/Pluma/Animations/A_Female_EndScene.fbx" id="8_ogb50"]
[ext_resource type="PackedScene" uid="uid://btc3u7kfa1fxy" path="res://Assets/Models/Environment/mountain/simple-mountain.fbx" id="9_g5ghk"]
[ext_resource type="PackedScene" uid="uid://bmd1xiraqjitq" path="res://Assets/Models/Props/Heart/breaking_heart.glb" id="10_x2mmu"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_hrnxv"]
sky_top_color = Color(0.112562, 0.142863, 0.185002, 1)
sky_horizon_color = Color(0.263945, 0.270919, 0.281929, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_13fx4"]
sky_material = SubResource("ProceduralSkyMaterial_hrnxv")

[sub_resource type="Environment" id="Environment_31kmv"]
background_mode = 2
sky = SubResource("Sky_13fx4")
tonemap_mode = 2

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_cij0j"]
blend_mode = 2

[sub_resource type="Animation" id="Animation_rtka4"]
resource_name = "fadeout"
length = 6.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ColorRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(4.9, 6.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(0, 0, 0, 1), Color(1, 1, 1, 1)]
}

[sub_resource type="Animation" id="Animation_70jxq"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ColorRect:color")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(0, 0, 0, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_3ly6n"]
_data = {
"RESET": SubResource("Animation_70jxq"),
"fadeout": SubResource("Animation_rtka4")
}

[node name="Node3D" type="Node3D"]
script = ExtResource("1_2le0v")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_31kmv")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0149002, 5.42384, 4.7081)

[node name="Sketchfab_Scene" parent="." instance=ExtResource("1_htwbj")]
transform = Transform3D(3.77404, 0, 0, 0, 2.75184, 0, 0, 0, 1, 122.279, 89.6922, 128.743)

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(-0.787432, 0.550009, -0.278283, -0.533555, -0.382117, 0.754523, 0.308658, 0.742615, 0.594351, -1.551, 6.58498, 2.01148)
light_color = Color(0.843137, 0.439216, 0.776471, 1)
light_energy = 10.0

[node name="FloorMarble" parent="." instance=ExtResource("2_qaiwt")]
transform = Transform3D(8.01892, 0, 0, 0, 1, 0, 0, 0, 2.75162, 0, 0, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="FloorMarble"]
transform = Transform3D(-0.0812596, 0.0160726, -0.0932195, -0.572343, -0.756753, 0.363648, -0.143232, 0.297047, 0.161649, 0, 1.5237, -13.8837)
light_color = Color(0.483665, 0.807081, 0.906717, 1)
light_energy = 0.1
light_indirect_energy = 0.0
light_volumetric_fog_energy = 1.55

[node name="FloorMarble" parent="FloorMarble" instance=ExtResource("2_qaiwt")]
transform = Transform3D(3.2204, 0, 0, 0, 1, 0, 0, 0, 2.75162, 0, 0, -7.21828)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="FloorMarble/FloorMarble"]
transform = Transform3D(1, 0, 0, 0, 0.988512, 0.15114, 0, -0.15114, 0.988512, 0, 1.5237, 0.293126)
light_color = Color(0.483665, 0.807081, 0.906717, 1)

[node name="FloorMarble" parent="FloorMarble/FloorMarble" instance=ExtResource("2_qaiwt")]
transform = Transform3D(6.76419, 0, 0, 0, 1, 0, 0, 0, 2.75162, 0, 0, -7.35813)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="FloorMarble/FloorMarble/FloorMarble"]
transform = Transform3D(1, 0, 0, 0, 0.988512, 0.15114, 0, -0.15114, 0.988512, 0, 1.5237, 0.293126)
light_color = Color(0.483665, 0.807081, 0.906717, 1)

[node name="Torro" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.79115, 0, -0.111378)

[node name="Group" type="Node3D" parent="Torro"]
transform = Transform3D(1.497, 0, 0, 0, 1.497, 0, 0, 0, 1.497, -2.17204, 0, -1.24026)

[node name="DeformationSystem" parent="Torro/Group" instance=ExtResource("3_peldu")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.38419e-07, 0, 0)

[node name="Skeleton3D" parent="Torro/Group/DeformationSystem" index="0"]
bones/1/position = Vector3(-9.54187, 2.32362, -0.00188097)
bones/1/rotation = Quaternion(0.69728, 0.716726, 0.00715402, 0.00735365)
bones/4/rotation = Quaternion(0, 3.88549e-25, -0.0289504, 0.999581)
bones/11/position = Vector3(0.139181, 0, -3.55271e-17)
bones/11/rotation = Quaternion(0, -3.48967e-25, -0.0899642, 0.995945)
bones/19/rotation = Quaternion(0.0423222, 0.79924, -0.0512968, 0.597322)
bones/20/position = Vector3(0.442575, -2.27374e-15, 1.7053e-15)
bones/20/rotation = Quaternion(0.219589, 0.483197, -0.14667, 0.834739)
bones/23/rotation = Quaternion(-6.20385e-25, 2.68834e-24, 0.0454506, 0.998967)
bones/27/rotation = Quaternion(-0.00246058, 0.0586987, 0.0273297, 0.997899)
bones/28/rotation = Quaternion(0.000319513, -0.0219894, -1.5414e-05, 0.999758)
bones/29/rotation = Quaternion(0.00046585, -0.0320326, 2.71314e-06, 0.999487)
bones/32/rotation = Quaternion(-2.99128e-15, 2.87934e-09, -2.1971e-09, 1)
bones/35/rotation = Quaternion(0.0537377, 0.117632, 0.0672995, 0.989316)
bones/36/rotation = Quaternion(-4.41313e-15, 1.93044e-10, -4.06642e-11, 1)
bones/37/rotation = Quaternion(-0.0142801, -0.0502441, -0.000142677, 0.998635)
bones/40/rotation = Quaternion(0.051538, 0.14564, 0.0286195, 0.98758)
bones/41/rotation = Quaternion(0.0023266, -0.00627664, -0.000285918, 0.999978)
bones/42/rotation = Quaternion(0.0187055, -0.0502293, -0.00122907, 0.998562)
bones/44/rotation = Quaternion(0.0324116, 0.0512116, 0.0101322, 0.99811)
bones/45/rotation = Quaternion(-0.00247148, 0.0188483, 8.48892e-05, 0.999819)
bones/46/rotation = Quaternion(0.00494181, -0.0376901, -7.65251e-05, 0.999277)
bones/48/rotation = Quaternion(0.79924, -0.0423222, -0.597322, -0.0512968)
bones/49/rotation = Quaternion(0.219589, 0.483197, -0.14667, 0.834739)
bones/52/rotation = Quaternion(1.65436e-24, 0, 0.0454506, 0.998967)
bones/56/rotation = Quaternion(-0.00246058, 0.0586987, 0.0273297, 0.997899)
bones/57/rotation = Quaternion(0.000319513, -0.0219894, -1.5414e-05, 0.999758)
bones/58/rotation = Quaternion(0.00046585, -0.0320326, 2.71314e-06, 0.999487)
bones/61/rotation = Quaternion(-2.99128e-15, 2.87934e-09, -2.1971e-09, 1)
bones/64/rotation = Quaternion(0.0537377, 0.117632, 0.0672995, 0.989316)
bones/65/rotation = Quaternion(-4.41313e-15, 1.93044e-10, -4.06642e-11, 1)
bones/66/rotation = Quaternion(-0.0142801, -0.0502441, -0.000142677, 0.998635)
bones/69/rotation = Quaternion(0.051538, 0.14564, 0.0286195, 0.98758)
bones/70/rotation = Quaternion(0.0023266, -0.00627664, -0.000285918, 0.999978)
bones/71/rotation = Quaternion(0.0187055, -0.0502293, -0.00122907, 0.998562)
bones/73/rotation = Quaternion(0.0324116, 0.0512116, 0.0101322, 0.99811)
bones/74/rotation = Quaternion(-0.00247148, 0.0188483, 8.48892e-05, 0.999819)
bones/75/rotation = Quaternion(0.00494181, -0.0376901, -7.65251e-05, 0.999277)
bones/77/rotation = Quaternion(-0.129392, 0.991217, -0.0182844, 0.0203086)
bones/78/rotation = Quaternion(-0.00141548, 2.42338e-26, -8.07794e-28, 0.999999)
bones/79/rotation = Quaternion(-0.00141548, 2.42338e-26, -8.07794e-28, 0.999999)
bones/80/rotation = Quaternion(-0.00141548, -2.34868e-08, -1.6585e-05, 0.999999)
bones/81/rotation = Quaternion(0.188323, 0.04636, 0.0831719, 0.97748)
bones/82/rotation = Quaternion(-0.00893652, -0.0521546, 0.635957, 0.769908)
bones/84/rotation = Quaternion(0.993986, -0.106962, -0.0189301, -0.0138471)
bones/85/rotation = Quaternion(0.00115465, -6.05845e-27, -7.6753e-26, 0.999999)
bones/86/rotation = Quaternion(0.00115465, -6.05845e-27, -7.6753e-26, 0.999999)
bones/87/rotation = Quaternion(0.00114948, 0.000109293, -0.0946569, 0.995509)
bones/88/rotation = Quaternion(0.184022, 0.0446675, 0.120998, 0.974423)
bones/89/rotation = Quaternion(-0.00804992, -0.0564126, 0.61937, 0.783028)

[node name="Male_Geometry" parent="Torro/Group/DeformationSystem/Skeleton3D" index="0"]
material_override = ExtResource("4_qx0je")

[node name="AnimationPlayer2" type="AnimationPlayer" parent="Torro/Group/DeformationSystem"]
root_node = NodePath("../../..")
libraries = {
"A_Male_FinalEndScene": ExtResource("5_3cul0")
}
autoplay = "A_Male_FinalEndScene/A_Male_FinalEndScene"

[node name="Pluma" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.64851, 0, -1.84434)

[node name="rig" type="Node3D" parent="Pluma"]

[node name="DeformationSystem" parent="Pluma/rig" instance=ExtResource("5_jakol")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.43681, 4.76837e-07, 0.447559)

[node name="Skeleton3D" parent="Pluma/rig/DeformationSystem" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00159788, -0.00823736, 0.00741577)
bones/1/position = Vector3(6.84484, 3.20969, 0.0229096)
bones/1/rotation = Quaternion(0.0784054, 0.0587354, 0.796487, 0.596667)
bones/4/rotation = Quaternion(-8.27181e-25, -1.10592e-24, -0.177777, 0.984071)
bones/7/rotation = Quaternion(-8.27181e-25, -7.23783e-24, -0.157591, 0.987504)
bones/8/position = Vector3(0.640938, -2.27374e-15, 1.98952e-15)
bones/8/rotation = Quaternion(6.20385e-25, 2.06795e-25, 0.270166, 0.962814)
bones/11/rotation = Quaternion(1.8198e-23, 0, 0.364074, 0.93137)
bones/19/position = Vector3(0.285999, -0.193142, -0.0655968)
bones/20/position = Vector3(0.226693, 1.13687e-15, -5.68434e-16)
bones/20/rotation = Quaternion(0.294885, 0.167733, -0.0943267, 0.935955)
bones/23/rotation = Quaternion(4.96308e-24, 2.06795e-24, 0.0900445, 0.995938)
bones/26/rotation = Quaternion(-0.331104, -0.110858, 0.170582, 0.921402)
bones/27/rotation = Quaternion(0.0101305, 0.0489387, -0.128192, 0.990489)
bones/28/rotation = Quaternion(-0.0150251, -0.119214, 0.0417745, 0.991876)
bones/29/rotation = Quaternion(0.0103682, 0.109453, -0.0793787, 0.990763)
bones/32/rotation = Quaternion(0.0330612, 0.119048, -0.0351432, 0.991715)
bones/33/rotation = Quaternion(-0.00929041, -0.0359859, 0.0171735, 0.999162)
bones/35/rotation = Quaternion(0.00984337, -0.0826642, -0.0946646, 0.992022)
bones/36/rotation = Quaternion(-0.0074783, 0.0621239, 0.0173832, 0.997889)
bones/37/rotation = Quaternion(-0.0195308, 0.0413106, -0.0216912, 0.99872)
bones/40/rotation = Quaternion(0.150248, -0.0768043, -0.32693, 0.929862)
bones/41/rotation = Quaternion(0.0779172, 0.210862, -0.0149488, 0.974291)
bones/42/rotation = Quaternion(-0.0839237, -0.313567, -0.0123794, 0.945769)
bones/44/rotation = Quaternion(0.220545, -0.0254113, -0.284428, 0.932639)
bones/45/rotation = Quaternion(-0.0122338, -0.0523364, -0.0101168, 0.998503)
bones/46/rotation = Quaternion(0.013815, 0.0634851, -0.0353378, 0.997261)
bones/48/position = Vector3(0.285999, -0.193142, 0.0655968)
bones/48/rotation = Quaternion(0.714377, 0.141086, -0.672468, 0.132467)
bones/49/position = Vector3(-0.226693, -2.27374e-15, 1.13687e-15)
bones/49/rotation = Quaternion(0.294885, 0.167733, -0.0943267, 0.935955)
bones/52/rotation = Quaternion(-3.30872e-24, -2.5229e-23, 0.0900445, 0.995938)
bones/55/rotation = Quaternion(-0.331104, -0.110858, 0.170582, 0.921402)
bones/56/rotation = Quaternion(0.0101305, 0.0489387, -0.128192, 0.990489)
bones/57/rotation = Quaternion(-0.0150251, -0.119214, 0.0417745, 0.991876)
bones/58/rotation = Quaternion(0.0103682, 0.109453, -0.0793787, 0.990763)
bones/61/rotation = Quaternion(0.0330612, 0.119048, -0.0351432, 0.991715)
bones/62/rotation = Quaternion(-0.00929041, -0.0359859, 0.0171735, 0.999162)
bones/64/rotation = Quaternion(0.00984337, -0.0826642, -0.0946646, 0.992022)
bones/65/rotation = Quaternion(-0.0074783, 0.0621239, 0.0173832, 0.997889)
bones/66/rotation = Quaternion(-0.0195308, 0.0413106, -0.0216912, 0.99872)
bones/69/rotation = Quaternion(0.150248, -0.0768043, -0.32693, 0.929862)
bones/70/rotation = Quaternion(0.0779172, 0.210862, -0.0149488, 0.974291)
bones/71/rotation = Quaternion(-0.0839237, -0.313567, -0.0123794, 0.945769)
bones/73/rotation = Quaternion(0.220545, -0.0254113, -0.284428, 0.932639)
bones/74/rotation = Quaternion(-0.0122338, -0.0523364, -0.0101168, 0.998503)
bones/75/rotation = Quaternion(0.013815, 0.0634851, -0.0353378, 0.997261)
bones/77/rotation = Quaternion(0.0741196, 0.995713, -0.0413342, -0.0367894)
bones/78/rotation = Quaternion(0.00131313, 1.84783e-26, 4.38733e-26, 0.999999)
bones/79/rotation = Quaternion(0.00131313, 1.84783e-26, 4.38733e-26, 0.999999)
bones/80/rotation = Quaternion(0.00131313, 1.54068e-09, -1.17254e-06, 0.999999)
bones/81/rotation = Quaternion(-0.0553648, -0.0284252, 0.0451659, 0.997039)
bones/82/rotation = Quaternion(-0.00962324, 0.00548293, 0.626178, 0.779601)
bones/84/rotation = Quaternion(0.966456, -0.247676, 0.0532971, -0.0421805)
bones/85/rotation = Quaternion(-0.00209909, 0, 0, 0.999998)
bones/86/rotation = Quaternion(-0.00209909, 0, 0, 0.999998)
bones/87/rotation = Quaternion(-0.00209909, -2.65209e-09, -1.26194e-06, 0.999998)
bones/88/rotation = Quaternion(-0.0491502, -0.0366003, -0.118882, 0.991016)
bones/89/rotation = Quaternion(-0.0122478, 3.7999e-05, 0.56345, 0.826059)

[node name="Female_Character" parent="Pluma/rig/DeformationSystem/Skeleton3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00159645, 0.00823593, -0.00741482)
material_override = ExtResource("6_rtsqc")

[node name="AnimationPlayer" parent="Pluma/rig/DeformationSystem" index="1"]
root_node = NodePath("../../..")

[node name="AnimationPlayer2" type="AnimationPlayer" parent="Pluma/rig/DeformationSystem"]
root_node = NodePath("../../..")
libraries = {
"A_Female_EndScene": ExtResource("8_ogb50")
}
autoplay = "A_Female_EndScene/A_Female_EndScene"

[node name="Sketchfab_Scene3" parent="." instance=ExtResource("1_htwbj")]
transform = Transform3D(100, 0, 0, 0, 100, 0, 0, 0, 100, 7.97197, -8.4209, -3.53145)

[node name="Sketchfab_Scene2" parent="." instance=ExtResource("1_htwbj")]
transform = Transform3D(100, 0, 0, 0, 100, 0, 0, 0, 100, -0.624785, -8.14549, -3.34146)

[node name="simple-mountain" parent="." instance=ExtResource("9_g5ghk")]
transform = Transform3D(17.9851, 0, 0, 0, 13.8309, 0, 0, 0, 10.0173, -175.509, 18.2873, -185.945)

[node name="simple-mountain" parent="simple-mountain" instance=ExtResource("9_g5ghk")]
transform = Transform3D(17.9851, 0, 0, 0, 13.8309, 0, 0, 0, 10.0173, 26.6932, 2.539, -146.504)

[node name="simple-mountain2" parent="simple-mountain" instance=ExtResource("9_g5ghk")]
transform = Transform3D(-10.3202, -0.038358, 1.06189, 0.200595, 7.92749, 0.14576, -4.41272, 0.45008, -2.47685, 104.697, -13.8148, -91.6698)

[node name="breaking_heart" parent="." instance=ExtResource("10_x2mmu")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, -0.631805, 1.71096, -5.8764)

[node name="Sketchfab_Scene4" parent="." instance=ExtResource("1_htwbj")]
transform = Transform3D(100, 0, 0, 0, 100, 0, 0, 0, 100, -9.06175, -8.4209, -3.53145)

[node name="ColorRect" type="ColorRect" parent="."]
material = SubResource("CanvasItemMaterial_cij0j")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_3ly6n")
}
autoplay = "fadeout"

[connection signal="animation_finished" from="AnimationPlayer" to="." method="_on_animation_player_animation_finished"]

[editable path="Torro/Group/DeformationSystem"]
[editable path="Pluma/rig/DeformationSystem"]
